if("undefined"!=typeof OpenAjax&&("undefined"==typeof jsf||null==typeof jsf)){OpenAjax.hub.registerLibrary("jsf","www.sun.com","1.0",null);}if(!window.jsf){var jsf=new function(){this.specversion=220000;this.implversion=0;this.separatorchar=A();this.getProjectStage=function(){var B=myfaces._impl.core._Runtime.getGlobalConfig("jsfAjaxImpl",myfaces._impl.core.Impl);return B.getProjectStage();};this.getViewState=function(C){var B=myfaces._impl.core._Runtime.getGlobalConfig("jsfAjaxImpl",myfaces._impl.core.Impl);return B.getViewState(C);};this.getClientWindow=function(){var B=myfaces._impl.core._Runtime.getGlobalConfig("jsfAjaxImpl",myfaces._impl.core.Impl);return(arguments.length)?B.getClientWindow(arguments[0]):B.getClientWindow();};function A(){var B=myfaces._impl.core._Runtime.getGlobalConfig("jsfAjaxImpl",myfaces._impl.core.Impl);return B.getSeparatorChar();}};window.jsf=jsf;}if(!jsf.ajax){jsf.ajax=new function(){this.request=function(C,D,B){if(!B){B={};}var A=myfaces._impl.core._Runtime.getGlobalConfig("jsfAjaxImpl",myfaces._impl.core.Impl);return A.request(C,D,B);};this.addOnError=function(B){var A=myfaces._impl.core._Runtime.getGlobalConfig("jsfAjaxImpl",myfaces._impl.core.Impl);return A.addOnError(B);};this.addOnEvent=function(B){var A=myfaces._impl.core._Runtime.getGlobalConfig("jsfAjaxImpl",myfaces._impl.core.Impl);return A.addOnEvent(B);};this.response=function(C,B){var A=myfaces._impl.core._Runtime.getGlobalConfig("jsfAjaxImpl",myfaces._impl.core.Impl);return A.response(C,B);};};}if(!jsf.util){jsf.util=new function(){this.chain=function(C,B){var A=myfaces._impl.core._Runtime.getGlobalConfig("jsfAjaxImpl",myfaces._impl.core.Impl);return A.chain.apply(A,arguments);};};}if(!jsf.push){jsf.push=new function(){var C=window.location.protocol.replace("http","ws")+"//";var H=500;var D=25;var K="Expired";var I={};var G={};var F={};var L={};function B(P,O,Q){var M;var R=0;var N=this;N.open=function(){if(M&&M.readyState==1){return ;}M=new WebSocket(O);M.onopen=function(T){if(!R){var U=F[P];for(var S=U.length-1;S>=0;S--){var V=U[S];G[V]["onopen"](Q);}}R=0;};M.onmessage=function(W){var V=JSON.parse(W.data);for(var U=F[P].length-1;U>=0;U--){var Z=F[P][U];if(document.getElementById(Z)){try{G[Z]["onmessage"](V,Q,W);}catch(Y){}var S=G[Z]["behaviors"];var X=S[V];if(X&&X.length){for(var T=0;T<X.length;T++){try{X[T](null);}catch(Y){}}}}else{F[P].splice(U,1);}}if(F[P].length==0){N.close();}};M.onclose=function(T){if(!M||(T.code==1000&&T.reason==K)||(T.code==1008)||(!R)||(R>=D)){var U=F[P];for(var S=U.length-1;S>=0;S--){var V=U[S];G[V]["onclose"](T.code,Q,T);}}else{setTimeout(N.open,H*R++);}};};N.close=function(){if(M){var S=M;M=null;S.close();}};}this.init=function(N,O,Q,T,P,S,R,M){S=J(S);if(!window.WebSocket){S(-1,Q);return ;}var U=O.substr(O.indexOf("?")+1);if(!G[N]){G[N]={"channelToken":U,"onopen":J(T),"onmessage":J(P),"onclose":S,"behaviors":R,"autoconnect":M};if(!F[U]){F[U]=[];}F[U].push(N);if(!I[U]){I[U]=new B(U,A(O),Q);}}if(M){this.open(N);}};this.open=function(M){E(G[M]["channelToken"]).open();};this.close=function(M){E(G[M]["channelToken"]).close();};function A(M){if(M.indexOf("://")<0){var N=window.location.hostname+":"+window.location.port;return C+N+M;}else{return M;}}function E(N){var M=I[N];if(M){return M;}else{throw new Error("Unknown channelToken: "+N);}}function J(M){return(typeof M!=="function")&&(M=window[M]||function(){}),M;}};}